<html>
<body>
	<div id = "record-events">
		<p>This is a test of websockets</p>
		<div id = "test-buttons">
			<button type ="button" name ="researchButton" id = "button1">Button 1</button>
			<button type ="button" name ="researchButton" id = "button2">Button 2</button>
		</div>
	</div>
	<script>
	var socket = io.connect();
	(function(){
		experimentr.startTimer('websocketTest')
		document.onmousemove = experimentr.sendMouseMovement;

	})();

	d3.select('body').selectAll('button').on('click', function(){
		pressed(d3.select(this).attr('id'));
		console.log(d3.select(this).attr('id'));

		if (d3.select(this).attr('name') == 'researchButton'){
			validate();
		}else{
			experimentr.next()
		};
		
	});

	function pressed(buttonTitle){
		console.log(buttonTitle);
		var timePressed = experimentr.now('websocketTest');
		timestamp = new Date().getTime();
		postId = 1234
		socket.emit('mouseClick',{buttonTitle: buttonTitle, timePressed: timePressed, postId: postId, timestamp:timestamp});
	};

	function validate() {
		console.log('validate called')
		experimentr.endTimer('demo');
		experimentr.release();
	}

	</script>
</body>
</html>